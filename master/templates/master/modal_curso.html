{% load static %}
{% load custom_filters %}

<form method="post" id="cursoForm" enctype="multipart/form-data">
    {% csrf_token %}
    
    <div class="row">
        <div class="col-md-6">
            <div class="form-group">
                <label for="tipo_estudio">Tipo de Estudio</label>
                <select name="tipo_estudio" id="tipo_estudio" class="form-control" required>
                    <option value="">Seleccionar...</option>
                    <option value="CURSO" {% if curso and curso.tipo_estudio == 'CURSO' %}selected{% endif %}>Curso</option>
                    <option value="DIPLOMADO" {% if curso and curso.tipo_estudio == 'DIPLOMADO' %}selected{% endif %}>Diplomado</option>
                    <option value="CERTIFICACION" {% if curso and curso.tipo_estudio == 'CERTIFICACION' %}selected{% endif %}>Certificación</option>
                    <option value="SEMINARIO" {% if curso and curso.tipo_estudio == 'SEMINARIO' %}selected{% endif %}>Seminario</option>
                    <option value="TALLER" {% if curso and curso.tipo_estudio == 'TALLER' %}selected{% endif %}>Taller</option>
                    <option value="CONGRESO" {% if curso and curso.tipo_estudio == 'CONGRESO' %}selected{% endif %}>Congreso</option>
                </select>
            </div>
        </div>
        <div class="col-md-6">
            <div class="form-group">
                <label for="descripcion">Descripción</label>
                <input type="text" name="descripcion" id="descripcion" class="form-control" placeholder="Ej: Curso de Python Avanzado" value="{% if curso %}{{ curso.descripcion }}{% endif %}" required>
            </div>
        </div>
    </div>
    
    <div class="row">
        <div class="col-md-6">
            <div class="form-group">
                <label for="institucion">Institución</label>
                <input type="text" name="institucion" id="institucion" class="form-control" value="{% if curso %}{{ curso.institucion }}{% endif %}" required>
            </div>
        </div>
        <div class="col-md-3">
            <div class="form-group">
                <label for="pais">País</label>
                <input type="text" name="pais" id="pais" class="form-control" value="{% if curso %}{{ curso.pais }}{% endif %}" required>
            </div>
        </div>
        <div class="col-md-3">
            <div class="form-group">
                <label for="ciudad">Ciudad</label>
                <input type="text" name="ciudad" id="ciudad" class="form-control" value="{% if curso %}{{ curso.ciudad }}{% endif %}" required>
            </div>
        </div>
    </div>
    
    <div class="row">
        <div class="col-md-4">
            <div class="form-group">
                <label for="fecha_inicio">Fecha de Inicio</label>
                <input type="date" name="fecha_inicio" id="fecha_inicio" class="form-control" value="{% if curso and curso.fecha_inicio %}{{ curso.fecha_inicio|date:'Y-m-d' }}{% endif %}" required>
            </div>
        </div>
        <div class="col-md-4">
            <div class="form-group">
                <label for="fecha_fin">Fecha de Fin</label>
                <input type="date" name="fecha_fin" id="fecha_fin" class="form-control" value="{% if curso and curso.fecha_fin %}{{ curso.fecha_fin|date:'Y-m-d' }}{% endif %}" required>
            </div>
        </div>
        <div class="col-md-4">
            <div class="form-group">
                <label for="horas_lectivas">Horas Lectivas</label>
                <input type="number" name="horas_lectivas" id="horas_lectivas" class="form-control" placeholder="Ej: 40" value="{% if curso and curso.horas_lectivas %}{{ curso.horas_lectivas }}{% endif %}">
            </div>
        </div>
    </div>
    
    <div class="row">
        <div class="col-md-6">
            <div class="form-group">
                <label for="nivel">Nivel</label>
                <select name="nivel" id="nivel" class="form-control">
                    <option value="">Seleccionar...</option>
                    <option value="BASICO" {% if curso and curso.nivel == 'BASICO' %}selected{% endif %}>Básico</option>
                    <option value="INTERMEDIO" {% if curso and curso.nivel == 'INTERMEDIO' %}selected{% endif %}>Intermedio</option>
                    <option value="AVANZADO" {% if curso and curso.nivel == 'AVANZADO' %}selected{% endif %}>Avanzado</option>
                    <option value="EXPERTO" {% if curso and curso.nivel == 'EXPERTO' %}selected{% endif %}>Experto</option>
                </select>
            </div>
        </div>
        <div class="col-md-6">
            <div class="form-group">
                <label for="certificado">Certificado</label>
                <input type="file" name="certificado" id="certificado" class="form-control" accept=".pdf,.jpg,.jpeg,.png,.doc,.docx">
                {% if curso and curso.certificado %}
                    <small class="text-muted">Archivo actual: <a href="{{ curso.certificado.url }}" target="_blank">{{ curso.certificado.name|basename }}</a></small>
                {% endif %}
            </div>
        </div>
    </div>
    
    <div class="form-group">
        <label for="observaciones">Observaciones</label>
        <textarea name="observaciones" id="observaciones" class="form-control" rows="3" placeholder="Observaciones adicionales...">{% if curso and curso.observaciones %}{{ curso.observaciones }}{% endif %}</textarea>
    </div>
    
    <div class="form-group text-right">
        <button type="button" class="btn btn-secondary mr-2" data-dismiss="modal">
            <i class="fal fa-times mr-1"></i>Cancelar
        </button>
        <button type="submit" class="btn btn-primary">
            <i class="fal fa-save mr-1"></i>
            {% if es_edicion %}
                Actualizar
            {% else %}
                Guardar
            {% endif %}
        </button>
    </div>
</form>
